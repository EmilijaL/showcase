<ui:composition template="/WEB-INF/templates/showcase.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:o="http://omnifaces.org/ui"
>
	<ui:define name="meta">
		<f:metadata>
			<f:attribute name="api.paths" value="component/input/ViewParam" />
			<f:attribute name="vdl.paths" value="o/viewParam" />
			<f:attribute name="src.paths" value="classes/org/omnifaces/showcase/components/ViewParamBean.java,classes/org/omnifaces/showcase/components/TestConverter.java" />

			<o:viewParam id="foo" name="foo" value="#{viewParamBean.foo}" required="true" converter="testConverter" />
			<f:viewParam id="bar" name="bar" value="#{viewParamBean.bar}" converter="javax.faces.Long" />
		</f:metadata>
	</ui:define>

	<ui:define name="description-extra">
		<h3>Demo</h3>
		<p>
			As to the demo below, if this page is requested by a request without a <code>test</code> parameter, it should
			display the message	with the <code>name</code> of the <code>&lt;o:viewParam&gt;</code> as label instead of 
			its client ID:
			<br/>
			"test: Validation Error: Value is required."
		</p>
		<p>
			Clicking the GET link initiates a new GET request with a <code>test</code> parameter. Every time this
			request is issued, a converter runs that attaches an ever increasing number to the displayed
			value.
		</p>
		<p>
			Clicking the POST link initiates a POST request. This should not convert
			the value again and thus the number should not change. The POST request should also
			not cause the <code>required="true"</code> validator to be triggered.
		</p>
		<p>
			When starting off with <h:link value="URL without view parameters" />, 
			clicking the GET link with <code>includeViewParams=true</code> would add the 
			<code>&lt;f:viewParam name="bar"&gt;</code> with an empty value to the request URL.
			This doesn't happen for <code>&lt;o:viewParam name="foo"&gt;</code>.
		</p>
	</ui:define>

	<ui:define name="demo-meta">
		<f:metadata>
			<o:viewParam id="foo" name="foo" value="#{viewParamBean.foo}" required="true" converter="testConverter" />
			<f:viewParam id="bar" name="bar" value="#{viewParamBean.bar}" converter="javax.faces.Long" />
		</f:metadata>
	</ui:define>

	<ui:define name="demo">
		<p>
			<h:link value="The GET link">
				<f:param name="foo" value="value"/>
			</h:link>
		</p>
		<p>
			<h:form>
				<h:commandLink value="The POST link" />
			</h:form>
		</p>
		<p>
			<h:link value="The GET link with includeViewParams=true" includeViewParams="true" />
		</p>
			
		<p>
			<b>The value: </b>
			#{viewParamBean.foo}
		</p>
		<p>
			<b>The message: </b>
			<h:message for="foo" />
		</p>
		
	</ui:define>
</ui:composition>